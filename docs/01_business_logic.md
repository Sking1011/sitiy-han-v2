# Бизнес-логика проекта "Сити Хан"

## Продукция (Готовые изделия)
- Колбаса (различные виды)
- Куриная грудка (варено-копченая)
- Курица целая
- Куриные окорочка
- Печеночная колбаса
- И другие деликатесы.

## Сырье и ингредиенты
- Мясо (основа)
- Специи (соль, сахар, перец)
- Черева (искусственные и натуральные)
- Расходные материалы (химия для уборки, перчатки).

## Важные принципы учета
1. **Базовые единицы:** Весь учет ведется в базовых единицах (КГ, Литры, Штуки). Если товар приходит в мешках, при закупе он конвертируется в КГ.
2. **Запрет изменений:** Проведенные документы (Закуп, Производство, Продажа) нельзя редактировать. Для исправлений используются документы "Корректировка".

## Финансовые метрики
1. **Грязная прибыль (Выручка):** Общая сумма продаж.
2. **Свободные деньги (Free Cash):**
   - Это "живые" деньги, доступные прямо сейчас.
   - Формула: `(Сумма всех продаж)` - `(Сумма всех закупок)` - `(Доп. расходы)`.
   - Эта цифра должна быть всегда перед глазами (на сайте и в будущем в боте).

## Перспективы развития (Future Proofing)
- **Telegram Bot Integration:**
  - В будущем планируется подключение бота для уведомлений в группу.
  - **События:** Уведомления о поступлении денег (продажа), расходах (закуп), отчеты по складу.
  - **Требование к архитектуре:** Логика должна быть изолирована от интерфейса (Service Layer), чтобы бот мог переиспользовать те же методы получения данных (остатки, финансы), что и сайт.
   - Выбор техкарты.
   - Указание количества готовой продукции.
   - Автоматическое списание сырья (мяса, специй) со склада.
   - Оприходование готовой продукции на склад.
3. **Склад:** Учет остатков сырья и готовой продукции в реальном времени.
4. **Продажа:** Регистрация реализации готовой продукции.
5. **Аналитика:** Расчет маржинальности (чистая/грязная прибыль), визуализация расходов и доходов через диаграммы.
